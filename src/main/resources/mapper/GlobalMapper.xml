<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kbin.inno.Nurture.DAO.GlobalDAO">
    <!-- 글로벌 – 현지교류 리스트 조회 -->
    <select id="selectInterchange" resultType="com.kbin.inno.Nurture.DTO.InterchangeDTO">
        /* 글로벌 – 현지교류 리스트 조회 */
        SELECT EXCH.EXCH_SN        AS EXCH_SN
             , EXCH.EXCH_TTL       AS EXCH_TTL
             , EXCH.EXCH_CN        AS EXCH_CN
             , EXCH.EXPSR_YN       AS EXPSR_YN
             , EXCH.SORT_NO        AS SORT_NO
             , REPLACE(FILES.FILE_PATH, '\', '/')     AS INTER_PATH
             , FILES.FILE_NM       AS INTER_FILE_NAME
          FROM KB_EXCH_INFO EXCH
             , KB_FILE_INFO FILES
         WHERE EXCH.ATCH_FILE_SN1 = FILES.FILE_SN(+)
           AND EXCH.EXPSR_YN = 'Y'
         ORDER BY EXCH.SORT_NO ASC
    </select>

    <select id="selectPlace" resultType="com.kbin.inno.Nurture.DTO.PlaceDTO">
        /* 글로벌 프로그램 - 육성 공간 조회 */
        SELECT PLC.PLC_SN           AS PLC_SN
             , PLC.PLC_NM           AS PLC_NM
             , PLC.PLC_ADDR         AS PLC_ADDR
             , PLC.SORT_NO          AS SORT_NO
             , PLC.ATCH_FILE_SN1    AS ATCH_FILE_SN1
             , REPLACE(FILES1.FILE_PATH, '\', '/')     AS PLC_PATH1
             , FILES1.FILE_NM       AS PLC_FILE_NAME1
             , PLC.ATCH_FILE_SN2    AS ATCH_FILE_SN2
             , REPLACE(FILES2.FILE_PATH, '\', '/')     AS PLC_PATH2
             , FILES2.FILE_NM       AS PLC_FILE_NAME2
             , PLC.ATCH_FILE_SN3    AS ATCH_FILE_SN3
             , REPLACE(FILES3.FILE_PATH, '\', '/')     AS PLC_PATH3
             , FILES3.FILE_NM       AS PLC_FILE_NAME3
        FROM KB_PLC_INFO PLC
           , KB_FILE_INFO FILES1
           , KB_FILE_INFO FILES2
           , KB_FILE_INFO FILES3
        WHERE PLC.ATCH_FILE_SN1 = FILES1.FILE_SN(+)
          AND PLC.ATCH_FILE_SN2 = FILES2.FILE_SN(+)
          AND PLC.ATCH_FILE_SN3 = FILES3.FILE_SN(+)
          AND PLC.FRST_RGTR = 1
        ORDER BY PLC.SORT_NO ASC
    </select>
</mapper>